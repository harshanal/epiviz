<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Epidemic curves • epiviz</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Epidemic curves">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epiviz</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/age-sex-pyramid.html">Age-sex pyramids</a>
    </li>
    <li>
      <a href="../articles/col-chart.html">Column charts</a>
    </li>
    <li>
      <a href="../articles/epi-curve.html">Epidemic curves</a>
    </li>
    <li>
      <a href="../articles/epi-map.html">Epidemiological maps</a>
    </li>
    <li>
      <a href="../articles/getting-started.html">Getting started with epiviz</a>
    </li>
    <li>
      <a href="../articles/line-chart.html">Line charts</a>
    </li>
    <li>
      <a href="../articles/llm-interpret.html">LLM interpretation</a>
    </li>
    <li>
      <a href="../articles/point-chart.html">Point charts</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><link href="epi-curve_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="epi-curve_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="epi-curve_files/plotly-binding-4.11.0/plotly.js"></script><script src="epi-curve_files/typedarray-0.1/typedarray.min.js"></script><link href="epi-curve_files/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="epi-curve_files/crosstalk-1.2.2/js/crosstalk.min.js"></script><link href="epi-curve_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="epi-curve_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Epidemic curves</h1>
            
      

      <div class="hidden name"><code>epi-curve.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Epidemic curves (epi curves) are fundamental tools in epidemiological
surveillance and outbreak investigation. They display the distribution
of cases over time, helping identify the source, transmission patterns,
and progression of disease outbreaks. The <code><a href="../reference/epi_curve.html">epi_curve()</a></code>
function supports various time periods, grouping options, rolling
averages, cumulative lines, and both static and interactive
visualizations.</p>
</div>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">epiviz</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-1-basic-epidemic-curve-with-rolling-average">Example 1: Basic epidemic curve with rolling average<a class="anchor" aria-label="anchor" href="#example-1-basic-epidemic-curve-with-rolling-average"></a>
</h2>
<p>Basic epi curves with rolling averages help smooth out daily
fluctuations and identify underlying trends in surveillance data.</p>
<div class="section level3">
<h3 id="create-the-basic-epi-curve">Create the basic epi curve<a class="anchor" aria-label="anchor" href="#create-the-basic-epi-curve"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epi_curve.html">epi_curve</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span>,</span>
<span>    date_var <span class="op">=</span> <span class="st">"specimen_date"</span>,     <span class="co"># Date variable in the dataset</span></span>
<span>    date_start <span class="op">=</span> <span class="st">"2020-01-01"</span>,      <span class="co"># Start date for the curve</span></span>
<span>    date_end <span class="op">=</span> <span class="st">"2023-12-31"</span>,        <span class="co"># End date for the curve</span></span>
<span>    time_period <span class="op">=</span> <span class="st">"year_month"</span>,     <span class="co"># Monthly aggregation</span></span>
<span>    fill_colours <span class="op">=</span> <span class="st">"#007C91"</span>,       <span class="co"># Color for bars</span></span>
<span>    <span class="co"># Rolling average parameters</span></span>
<span>    rolling_average_line <span class="op">=</span> <span class="cn">TRUE</span>,                    <span class="co"># Include rolling average line</span></span>
<span>    rolling_average_line_lookback <span class="op">=</span> <span class="fl">3</span>,             <span class="co"># 3-month rolling average</span></span>
<span>    rolling_average_line_legend_label <span class="op">=</span> <span class="st">"3-month rolling average"</span>,  <span class="co"># Legend label</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections per Month"</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Year - Month"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">90</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="epi-curve_files/figure-html/basic-epi-curve-1.png" alt="Column chart showing monthly laboratory detections with an overlaid three-month rolling average line." width="768"><p class="caption">
Monthly epidemic curve with a three-month rolling average.
</p>
</div>
<p><strong>Interpretation</strong>: This epi curve shows monthly
detections with a 3-month rolling average line that smooths out
month-to-month variations to reveal underlying trends.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-2-grouped-epidemic-curve-with-stacked-bars">Example 2: Grouped epidemic curve with stacked bars<a class="anchor" aria-label="anchor" href="#example-2-grouped-epidemic-curve-with-stacked-bars"></a>
</h2>
<p>Grouped epi curves allow comparison of different categories (e.g.,
organism types) over time, showing both individual patterns and overall
trends.</p>
<div class="section level3">
<h3 id="create-the-grouped-epi-curve">Create the grouped epi curve<a class="anchor" aria-label="anchor" href="#create-the-grouped-epi-curve"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define custom week breaks for better x-axis display</span></span>
<span><span class="va">week_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-05-31"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">'2 week'</span><span class="op">)</span></span>
<span><span class="va">week_breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">isoyear</a></span><span class="op">(</span><span class="va">week_seq</span><span class="op">)</span>, <span class="st">'-W'</span>, <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/week.html" class="external-link">isoweek</a></span><span class="op">(</span><span class="va">week_seq</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/epi_curve.html">epi_curve</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span>,</span>
<span>    date_var <span class="op">=</span> <span class="st">"specimen_date"</span>,</span>
<span>    date_start <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>    date_end <span class="op">=</span> <span class="st">"2022-05-31"</span>,</span>
<span>    time_period <span class="op">=</span> <span class="st">"iso_year_week"</span>,  <span class="co"># Weekly aggregation using ISO weeks</span></span>
<span>    group_var <span class="op">=</span> <span class="st">"organism_species_name"</span>,  <span class="co"># Group by organism type</span></span>
<span>    group_var_barmode <span class="op">=</span> <span class="st">"stack"</span>,    <span class="co"># Stack bars to show total and composition</span></span>
<span>    fill_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KLEBSIELLA PNEUMONIAE"</span> <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>                     <span class="st">"STAPHYLOCOCCUS AUREUS"</span> <span class="op">=</span> <span class="st">"#8A1B61"</span>,</span>
<span>                     <span class="st">"PSEUDOMONAS AERUGINOSA"</span> <span class="op">=</span> <span class="st">"#FF7F32"</span><span class="op">)</span>,  <span class="co"># Named color mapping</span></span>
<span>    rolling_average_line <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rolling_average_line_legend_label <span class="op">=</span> <span class="st">"7-week rolling average"</span>,</span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory detections by species \n 2021-01 - 2022-05"</span>,</span>
<span>    chart_footer <span class="op">=</span> <span class="st">"This chart has been created using simulated data."</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Year - ISO Week"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">90</span>,</span>
<span>    x_axis_break_labels <span class="op">=</span> <span class="va">week_breaks</span>,  <span class="co"># Custom week labels</span></span>
<span>    y_axis_break_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">250</span>, <span class="fl">20</span><span class="op">)</span>,  <span class="co"># Custom y-axis breaks</span></span>
<span>    chart_title_colour <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    chart_footer_colour <span class="op">=</span> <span class="st">"#007C91"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="epi-curve_files/figure-html/grouped-epi-curve-1.png" alt="Stacked column chart showing weekly laboratory detections by organism species, with an overlaid seven-week rolling average line." width="768"><p class="caption">
Stacked weekly epidemic curve by organism species with seven-week
rolling average.
</p>
</div>
<p><strong>Interpretation</strong>: This stacked epi curve shows both
the total weekly detections and the relative contribution of each
organism type, revealing patterns in the overall burden and individual
organism trends.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-3-daily-epi-curve-with-case-boxes-and-cumulative-line">Example 3: Daily epi curve with case boxes and cumulative line<a class="anchor" aria-label="anchor" href="#example-3-daily-epi-curve-with-case-boxes-and-cumulative-line"></a>
</h2>
<p>Daily epi curves with case boxes and cumulative lines are essential
for outbreak investigation, providing detailed temporal resolution and
cumulative case tracking.</p>
<div class="section level3">
<h3 id="create-the-detailed-daily-epi-curve">Create the detailed daily epi curve<a class="anchor" aria-label="anchor" href="#create-the-detailed-daily-epi-curve"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epi_curve.html">epi_curve</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span>,</span>
<span>    date_var <span class="op">=</span> <span class="st">"specimen_date"</span>,</span>
<span>    date_start <span class="op">=</span> <span class="st">"2021-06-01"</span>,</span>
<span>    date_end <span class="op">=</span> <span class="st">"2021-07-31"</span>,</span>
<span>    time_period <span class="op">=</span> <span class="st">"day"</span>,            <span class="co"># Daily aggregation for detailed analysis</span></span>
<span>    group_var <span class="op">=</span> <span class="st">"organism_species_name"</span>,</span>
<span>    group_var_barmode <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>    fill_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#007C91"</span>, <span class="st">"#8A1B61"</span>, <span class="st">"#FF7F32"</span><span class="op">)</span>,</span>
<span>    <span class="co"># Advanced features</span></span>
<span>    case_boxes <span class="op">=</span> <span class="cn">TRUE</span>,              <span class="co"># Enable case boxes</span></span>
<span>    rolling_average_line <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rolling_average_line_legend_label <span class="op">=</span> <span class="st">"7-day rolling average"</span>,</span>
<span>    cumulative_sum_line <span class="op">=</span> <span class="cn">TRUE</span>,     <span class="co"># Add cumulative line</span></span>
<span>    <span class="co"># Threshold line</span></span>
<span>    hline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">35</span><span class="op">)</span>,                  <span class="co"># Threshold value</span></span>
<span>    hline_label <span class="op">=</span> <span class="st">"Threshold"</span>,</span>
<span>    hline_width <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    hline_colour <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    hline_label_colour <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    hline_type <span class="op">=</span> <span class="st">"dotdash"</span>,</span>
<span>    <span class="co"># Styling</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory detections by species \n June - July 2021"</span>,</span>
<span>    chart_title_colour <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    legend_title <span class="op">=</span> <span class="st">"Detected organisms"</span>,</span>
<span>    legend_pos <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>    y_limit_max <span class="op">=</span> <span class="fl">40</span>,               <span class="co"># Set y-axis maximum</span></span>
<span>    x_axis_break_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-06-01"</span><span class="op">)</span>,</span>
<span>                                           <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-07-31"</span><span class="op">)</span>,</span>
<span>                                           by <span class="op">=</span> <span class="st">'2 days'</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># Every 2 days</span></span>
<span>    y_axis_break_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">40</span>, <span class="fl">5</span><span class="op">)</span>,  <span class="co"># Every 5 units</span></span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">90</span>,</span>
<span>    y_axis_label_angle <span class="op">=</span> <span class="fl">90</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="epi-curve_files/figure-html/detailed-daily-epi-curve-1.png" alt="Stacked daily column chart between June and July 2021 showing laboratory detections by species, annotated with case boxes, a seven-day rolling average line, and a cumulative total line." width="768"><p class="caption">
Daily epidemic curve with stacked bars, case boxes, cumulative line, and
threshold indicator.
</p>
</div>
<p><strong>Interpretation</strong>: This comprehensive daily epi curve
includes case boxes for highlighting specific data points, a rolling
average for trend identification, a cumulative line for total case
tracking, and a threshold line for alert levels.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-4-pre-aggregated-data-with-rolling-and-cumulative-lines">Example 4: Pre-aggregated data with rolling and cumulative
lines<a class="anchor" aria-label="anchor" href="#example-4-pre-aggregated-data-with-rolling-and-cumulative-lines"></a>
</h2>
<p>When working with pre-aggregated data, you can still add rolling
averages and cumulative lines for trend analysis.</p>
<div class="section level3">
<h3 id="prepare-pre-aggregated-data">Prepare pre-aggregated data<a class="anchor" aria-label="anchor" href="#prepare-pre-aggregated-data"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create pre-aggregated data by date</span></span>
<span><span class="va">pre_agg_data</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">specimen_date</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>detections <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-pre-aggregated-epi-curve">Create the pre-aggregated epi curve<a class="anchor" aria-label="anchor" href="#create-the-pre-aggregated-epi-curve"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epi_curve.html">epi_curve</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">pre_agg_data</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,               <span class="co"># Specify the count column</span></span>
<span>    date_var <span class="op">=</span> <span class="st">"specimen_date"</span>,</span>
<span>    date_start <span class="op">=</span> <span class="st">"2021-10-01"</span>,</span>
<span>    date_end <span class="op">=</span> <span class="st">"2022-03-31"</span>,</span>
<span>    time_period <span class="op">=</span> <span class="st">"iso_year_week"</span>,  <span class="co"># Weekly aggregation</span></span>
<span>    <span class="co"># Rolling and cumulative lines</span></span>
<span>    rolling_average_line <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rolling_average_line_lookback <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    rolling_average_line_legend_label <span class="op">=</span> <span class="st">"3-week rolling average"</span>,</span>
<span>    rolling_average_line_colour <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    rolling_average_line_width <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>    cumulative_sum_line <span class="op">=</span> <span class="cn">TRUE</span>,     <span class="co"># Add cumulative line</span></span>
<span>    cumulative_sum_line_colour <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections by Region \nWinter 2021-22"</span>,</span>
<span>    chart_title_colour <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    legend_pos <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>    y_axis_break_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">300</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"ISO Week"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">90</span>,</span>
<span>    hover_labels <span class="op">=</span> <span class="st">"&lt;b&gt;Week:&lt;/b&gt; %{x}&lt;br&gt;&lt;b&gt;Count:&lt;/b&gt; %{y}"</span>  <span class="co"># Custom hover text</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="epi-curve_files/figure-html/pre-aggregated-epi-curve-1.png" alt="Column chart summarising weekly detections from pre-aggregated data with an overlaid three-week rolling average line and an orange cumulative total line." width="768"><p class="caption">
Weekly epidemic curve from pre-aggregated counts with rolling average
and cumulative total.
</p>
</div>
<p><strong>Interpretation</strong>: This epi curve uses pre-aggregated
data with both rolling average and cumulative lines, providing multiple
perspectives on the temporal trends in detections.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-5-interactive-grouped-epi-curve">Example 5: Interactive grouped epi curve<a class="anchor" aria-label="anchor" href="#example-5-interactive-grouped-epi-curve"></a>
</h2>
<p>Interactive epi curves are ideal for surveillance dashboards,
allowing users to explore data dynamically, zoom into specific time
periods, and hover for detailed information.</p>
<div class="section level3">
<h3 id="create-the-interactive-grouped-epi-curve">Create the interactive grouped epi curve<a class="anchor" aria-label="anchor" href="#create-the-interactive-grouped-epi-curve"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/epi_curve.html">epi_curve</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">TRUE</span>,   <span class="co"># Create interactive plotly chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span>,</span>
<span>    date_var <span class="op">=</span> <span class="st">"specimen_date"</span>,</span>
<span>    date_start <span class="op">=</span> <span class="st">"2021-01-01"</span>,</span>
<span>    date_end <span class="op">=</span> <span class="st">"2022-05-31"</span>,</span>
<span>    time_period <span class="op">=</span> <span class="st">"iso_year_week"</span>,</span>
<span>    group_var <span class="op">=</span> <span class="st">"organism_species_name"</span>,</span>
<span>    group_var_barmode <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>    fill_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KLEBSIELLA PNEUMONIAE"</span> <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>                     <span class="st">"STAPHYLOCOCCUS AUREUS"</span> <span class="op">=</span> <span class="st">"#8A1B61"</span>,</span>
<span>                     <span class="st">"PSEUDOMONAS AERUGINOSA"</span> <span class="op">=</span> <span class="st">"#FF7F32"</span><span class="op">)</span>,</span>
<span>    rolling_average_line <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rolling_average_line_legend_label <span class="op">=</span> <span class="st">"7-week rolling average"</span>,</span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory detections by species \n 2021-01 - 2022-05"</span>,</span>
<span>    chart_footer <span class="op">=</span> <span class="st">"This chart has been created using simulated data."</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Year - ISO Week"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">90</span>,</span>
<span>    x_axis_break_labels <span class="op">=</span> <span class="va">week_breaks</span>,</span>
<span>    y_axis_break_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">250</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>    chart_title_colour <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    chart_footer_colour <span class="op">=</span> <span class="st">"#007C91"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:768px;height:576px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"visdat":{"3ce5c8e71f62":["function () ","plotlyVisDat"]},"cur_data":"3ce5c8e71f62","attrs":{"3ce5c8e71f62":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","color":{},"colors":["#007C91","#8A1B61","#FF7F32"],"marker":{"line":{"color":"transparent","width":0.5}},"hovertemplate":"<b>%{x}<\/b><br>%{y}","showlegend":true,"inherit":true},"3ce5c8e71f62.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"lines","line":{"color":"red","width":2},"name":"7-week rolling average","hovertemplate":"<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","inherit":true}},"layout":{"margin":{"b":104.69983318002789,"l":3,"t":50,"r":10},"title":{"text":"<b>Laboratory detections by species <br> 2021-01 - 2022-05<\/b>","font":{"family":"Arial","size":12,"color":"#007C91"},"x":0.5,"y":1.1000000000000001,"xanchor":"centre","yanchor":"bottom","xref":"paper","yref":"paper"},"annotations":[{"x":1,"y":-0.29727959963206696,"text":"This chart has been created using simulated data.","xanchor":"right","yanchor":"middle","xref":"paper","yref":"paper","showarrow":false,"font":{"family":"Arial","size":10,"color":"#007C91"},"align":"right"},{"x":1,"y":-0.29727959963206696,"text":"This chart has been created using simulated data.","xanchor":"right","yanchor":"middle","xref":"paper","yref":"paper","showarrow":false,"font":{"family":"Arial","size":10,"color":"#007C91"},"align":"right"},{"x":1,"y":-0.29727959963206696,"text":"This chart has been created using simulated data.","xanchor":"right","yanchor":"middle","xref":"paper","yref":"paper","showarrow":false,"font":{"family":"Arial","size":10,"color":"#007C91"},"align":"right"}],"xaxis":{"domain":[0,1],"automargin":true,"title":{"text":"<b>Year - ISO Week<\/b>","font":{"family":"Arial","size":11,"color":"black"}},"tickfont":{"family":"Arial","size":9,"color":"black"},"tickangle":90,"showline":true,"linewidth":1,"ticks":"outside","ticklen":3,"range":["2020-W53","2022-W22"],"tickvals":["2020-W53","2021-W2","2021-W4","2021-W6","2021-W8","2021-W10","2021-W12","2021-W14","2021-W16","2021-W18","2021-W20","2021-W22","2021-W24","2021-W26","2021-W28","2021-W30","2021-W32","2021-W34","2021-W36","2021-W38","2021-W40","2021-W42","2021-W44","2021-W46","2021-W48","2021-W50","2021-W52","2022-W2","2022-W4","2022-W6","2022-W8","2022-W10","2022-W12","2022-W14","2022-W16","2022-W18","2022-W20"]},"yaxis":{"domain":[0,1],"automargin":true,"title":{"text":"<b>Number of detections<\/b>","font":{"family":"Arial","size":11,"color":"black"}},"tickfont":{"family":"Arial","size":9,"color":"black"},"tickangle":-0,"showline":true,"zeroline":false,"linewidth":1,"ticks":"outside","ticklen":3,"range":[0,221.55000000000001],"tickvals":[0,20,40,60,80,100,120,140,160,180,200,220,240]},"font":{"family":"Arial","size":9,"color":"black"},"barmode":"stack","legend":{"x":1.02,"y":0.5,"xanchor":"left","yanchor":"middle","orientation":"v","title":{"text":"","font":{"size":8}},"font":{"size":8}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2020-W53","2021-W1","2021-W2","2021-W3","2021-W4","2021-W5","2021-W6","2021-W7","2021-W8","2021-W9","2021-W10","2021-W11","2021-W12","2021-W13","2021-W14","2021-W15","2021-W16","2021-W17","2021-W18","2021-W19","2021-W20","2021-W21","2021-W22","2021-W23","2021-W24","2021-W25","2021-W26","2021-W27","2021-W28","2021-W29","2021-W30","2021-W31","2021-W32","2021-W33","2021-W34","2021-W35","2021-W36","2021-W37","2021-W38","2021-W39","2021-W40","2021-W41","2021-W42","2021-W43","2021-W44","2021-W45","2021-W46","2021-W47","2021-W48","2021-W49","2021-W50","2021-W51","2021-W52","2022-W1","2022-W2","2022-W3","2022-W4","2022-W5","2022-W6","2022-W7","2022-W8","2022-W9","2022-W10","2022-W11","2022-W12","2022-W13","2022-W14","2022-W15","2022-W16","2022-W17","2022-W18","2022-W19","2022-W20","2022-W21","2022-W22"],"y":[33,60,64,77,55,68,67,86,73,59,64,63,71,82,59,68,78,47,66,88,85,72,74,77,77,95,57,87,77,74,73,68,55,54,69,71,80,59,79,73,77,71,71,69,74,70,70,64,86,65,61,67,71,58,72,68,78,66,84,70,71,74,90,76,73,75,61,72,84,77,102,88,85,76,31],"type":"bar","marker":{"color":"rgba(138,27,97,1)","line":{"color":"transparent","width":0.5}},"hovertemplate":["<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}"],"showlegend":true,"name":"STAPHYLOCOCCUS AUREUS","textfont":{"color":"rgba(138,27,97,1)"},"error_y":{"color":"rgba(138,27,97,1)"},"error_x":{"color":"rgba(138,27,97,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2020-W53","2021-W1","2021-W2","2021-W3","2021-W4","2021-W5","2021-W6","2021-W7","2021-W8","2021-W9","2021-W10","2021-W11","2021-W12","2021-W13","2021-W14","2021-W15","2021-W16","2021-W17","2021-W18","2021-W19","2021-W20","2021-W21","2021-W22","2021-W23","2021-W24","2021-W25","2021-W26","2021-W27","2021-W28","2021-W29","2021-W30","2021-W31","2021-W32","2021-W33","2021-W34","2021-W35","2021-W36","2021-W37","2021-W38","2021-W39","2021-W40","2021-W41","2021-W42","2021-W43","2021-W44","2021-W45","2021-W46","2021-W47","2021-W48","2021-W49","2021-W50","2021-W51","2021-W52","2022-W1","2022-W2","2022-W3","2022-W4","2022-W5","2022-W6","2022-W7","2022-W8","2022-W9","2022-W10","2022-W11","2022-W12","2022-W13","2022-W14","2022-W15","2022-W16","2022-W17","2022-W18","2022-W19","2022-W20","2022-W21","2022-W22"],"y":[5,45,34,29,34,27,23,44,29,28,29,35,35,39,38,42,36,37,38,25,33,31,38,37,31,29,33,31,19,35,34,22,26,33,30,37,31,33,27,29,36,30,31,32,35,33,39,45,48,53,34,33,39,36,32,42,34,26,27,38,33,31,26,31,30,36,26,28,27,35,29,33,35,40,8],"type":"bar","marker":{"color":"rgba(255,127,50,1)","line":{"color":"transparent","width":0.5}},"hovertemplate":["<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}"],"showlegend":true,"name":"PSEUDOMONAS AERUGINOSA","textfont":{"color":"rgba(255,127,50,1)"},"error_y":{"color":"rgba(255,127,50,1)"},"error_x":{"color":"rgba(255,127,50,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2020-W53","2021-W1","2021-W2","2021-W3","2021-W4","2021-W5","2021-W6","2021-W7","2021-W8","2021-W9","2021-W10","2021-W11","2021-W12","2021-W13","2021-W14","2021-W15","2021-W16","2021-W17","2021-W18","2021-W19","2021-W20","2021-W21","2021-W22","2021-W23","2021-W24","2021-W25","2021-W26","2021-W27","2021-W28","2021-W29","2021-W30","2021-W31","2021-W32","2021-W33","2021-W34","2021-W35","2021-W36","2021-W37","2021-W38","2021-W39","2021-W40","2021-W41","2021-W42","2021-W43","2021-W44","2021-W45","2021-W46","2021-W47","2021-W48","2021-W49","2021-W50","2021-W51","2021-W52","2022-W1","2022-W2","2022-W3","2022-W4","2022-W5","2022-W6","2022-W7","2022-W8","2022-W9","2022-W10","2022-W11","2022-W12","2022-W13","2022-W14","2022-W15","2022-W16","2022-W17","2022-W18","2022-W19","2022-W20","2022-W21","2022-W22"],"y":[27,50,53,60,53,56,62,42,62,50,51,45,62,66,48,45,54,45,47,53,53,64,55,81,63,66,53,52,58,56,49,63,65,60,58,46,54,63,55,61,43,80,55,48,60,56,49,65,60,59,71,75,43,68,56,45,58,56,69,51,54,61,64,53,54,55,59,77,69,58,80,61,67,60,19],"type":"bar","marker":{"color":"rgba(0,124,145,1)","line":{"color":"transparent","width":0.5}},"hovertemplate":["<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}","<b>%{x}<\/b><br>%{y}"],"showlegend":true,"name":"KLEBSIELLA PNEUMONIAE","textfont":{"color":"rgba(0,124,145,1)"},"error_y":{"color":"rgba(0,124,145,1)"},"error_x":{"color":"rgba(0,124,145,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2020-W53","2021-W1","2021-W2","2021-W3","2021-W4","2021-W5","2021-W6","2021-W7","2021-W8","2021-W9","2021-W10","2021-W11","2021-W12","2021-W13","2021-W14","2021-W15","2021-W16","2021-W17","2021-W18","2021-W19","2021-W20","2021-W21","2021-W22","2021-W23","2021-W24","2021-W25","2021-W26","2021-W27","2021-W28","2021-W29","2021-W30","2021-W31","2021-W32","2021-W33","2021-W34","2021-W35","2021-W36","2021-W37","2021-W38","2021-W39","2021-W40","2021-W41","2021-W42","2021-W43","2021-W44","2021-W45","2021-W46","2021-W47","2021-W48","2021-W49","2021-W50","2021-W51","2021-W52","2022-W1","2022-W2","2022-W3","2022-W4","2022-W5","2022-W6","2022-W7","2022-W8","2022-W9","2022-W10","2022-W11","2022-W12","2022-W13","2022-W14","2022-W15","2022-W16","2022-W17","2022-W18","2022-W19","2022-W20","2022-W21","2022-W22"],"y":[65,110,123.66666666666667,134.25,135.80000000000001,138.33333333333334,140.28571428571428,155.57142857142858,156.85714285714286,154.85714285714286,151.71428571428572,151.85714285714286,154.28571428571428,159.28571428571428,155.42857142857142,154.14285714285714,158.57142857142858,156.42857142857142,157.57142857142858,157.28571428571428,155,158.14285714285714,159.85714285714286,163.71428571428572,169.71428571428572,175.28571428571428,172,171.85714285714286,170,169.71428571428572,164.14285714285714,161.57142857142858,155.28571428571428,155.85714285714286,154,154,154,153.85714285714286,155,157.42857142857142,158.71428571428572,162.14285714285714,162.57142857142858,160.28571428571428,162.28571428571428,162,161.28571428571428,163.85714285714286,165.71428571428572,168.57142857142858,171,171.85714285714286,171,171.57142857142858,169.57142857142858,164,163,160.42857142857142,161.14285714285714,162,161.42857142857142,162.28571428571428,165.85714285714286,164.42857142857142,165.71428571428572,163.71428571428572,161.85714285714286,164.57142857142858,166.57142857142858,165.14285714285714,172.42857142857142,176,179,183.28571428571428,166.28571428571428],"type":"scatter","mode":"lines","line":{"color":"red","width":2},"name":"7-week rolling average","hovertemplate":["<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>","<b>%{x}<\/b><br>%{y}<extra>7-week rolling average<\/extra>"],"marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p class="caption">
Interactive stacked epidemic curve with weekly aggregation and rolling
average.
</p>
</div>
<p><strong>Interpretation</strong>: The interactive epi curve allows
detailed exploration of weekly patterns, with hover information showing
exact values and the ability to zoom into specific time periods for
closer analysis.</p>
</div>
</div>
<div class="section level2">
<h2 id="tips-for-epidemic-curves">Tips for epidemic curves<a class="anchor" aria-label="anchor" href="#tips-for-epidemic-curves"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<p><strong>Time period selection</strong>: Choose the appropriate
time period based on your analysis needs:</p>
<ul>
<li>
<code>"day"</code> for outbreak investigation</li>
<li>
<code>"iso_year_week"</code> for weekly surveillance</li>
<li>
<code>"year_month"</code> for monthly trends</li>
<li>
<code>"year"</code> for annual comparisons</li>
</ul>
</li>
<li>
<p><strong>Rolling averages</strong>: Use rolling averages to smooth
out fluctuations and identify underlying trends:</p>
<ul>
<li>
<code>rolling_average_line_lookback</code> controls the window
size</li>
<li>Customize colors and line styles for better visibility</li>
</ul>
</li>
<li><p><strong>Cumulative lines</strong>: Add
<code>cumulative_sum_line = TRUE</code> to track total cases over time,
useful for outbreak progression analysis.</p></li>
<li><p><strong>Case boxes</strong>: Enable
<code>case_boxes = TRUE</code> for interactive charts to highlight
specific data points of interest.</p></li>
<li><p><strong>Threshold lines</strong>: Use <code>hline</code>
parameters to add horizontal reference lines for alert levels or
outbreak thresholds.</p></li>
<li><p><strong>Pre-aggregated data</strong>: When using pre-aggregated
data, specify the <code>y</code> parameter to indicate which column
contains the counts.</p></li>
<li><p><strong>Custom breaks</strong>: Use
<code>x_axis_break_labels</code> and <code>y_axis_break_labels</code> to
control axis tick marks for better readability.</p></li>
<li><p><strong>Color mapping</strong>: Use named color vectors for
grouped data to ensure consistent colors across charts.</p></li>
<li><p><strong>Interactive features</strong>: Set
<code>dynamic = TRUE</code> for interactive charts with zooming,
hovering, and filtering capabilities.</p></li>
<li><p><strong>Chart styling</strong>: Use
<code>chart_title_colour</code> and <code>chart_footer_colour</code> to
customize text colors and maintain visual consistency.</p></li>
<li><p><strong>Hover labels</strong>: Customize
<code>hover_labels</code> for interactive charts to show specific
information when hovering over data points.</p></li>
<li><p><strong>Axis limits</strong>: Use <code>y_limit_max</code> to set
maximum y-axis values for better focus on relevant data ranges.</p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Harshana Liyanage, Alex Bhattacharya, Liam Fitzpatrick, James Leatherland, Sudha Aurumugam, Jordan Worth, James Duke, Emma Parker.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
